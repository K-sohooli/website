---
title: "Advanced Markdown: Citation and Cross-Referencing"
author: "Tilburg Science Hub"


# The next lines allow you to change the spacing in your document You can 
# switch out \onehalfspacing with \singlespacing or \doublespacing, if desired.
header-includes:
    - \linespread{1.25}
    - \usepackage[tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in]{geometry}
    - \usepackage{titlesec}
    - \titleformat{\chapter}[display]{\normalfont\huge\bfseries}{\chaptertitlename\ \thechapter}{20pt}{\Large}
    - \titlespacing*{\chapter}{0pt}{-20pt}{40pt}
    
# Remove the hashtag to specify which version of output you would like.
# Can only choose one at a time.
output: 
  # bookdown::pdf_document2
  bookdown::html_document2
  # bookdown::word_document2
  # bookdown::gitbook

# Specify the location of the bibliography below
bibliography: references.bib
link-citations: yes

# Incorporate a list of figures or/and tables by setting the value to TRUE.
lof: false
---

# Overview {-} 
<!-- The {.unnumbered} option here means that the overview will be 
"Chapter 0." You can also use {-} for no numbers on chapters.
-->

[`Rmarkdown`](https://rmarkdown.rstudio.com/) is a format designed for crafting reproducible and dynamic reports using R. It's a useful tool for creating a wide range of academic documents, including journal articles, books, and technical reports. 

Our website offers the `tisemdown` thesis [template](https://tilburgsciencehub.com/topics/research-skills/templates-dynamic-content/templates/bookdown-theses/), which provides a read-to-go thesis template using `Rmarkdown`. This template pre-configures all the formatting requirements of your study programs, kickstarting the initial setup process. 

This article builds upon the thesis template article by exploring more sophisticated `Rmarkdown` syntax. While the initial guide covers basic syntax, here we further your understanding by covering:

- Efficient citation referencing and bibliography management.
- Techniques for cross-referencing figures and tables within your text.

# Citations {#citing-sections}
This section will walk you through the process of inserting citations in `RMarkdown` documents. This includes a step-by-step procedure for setting up a bibliography file, how to cite sources within your text, and customizing the location of your bibliography section. 

## Citing Articles & Bibliography {.unnumbered}

#### Step 1: Create or Obtain a `BibTeX` File {-}

A `BibTeX` file, identified by a .bib extension, organizes references in a structured, machine-readable format. While manual creation is an option, We recommend using citation management tools like [Zotero](https://www.zotero.org/) or [citr addin](https://github.com/crsh/citr). Note that the file must be saved using the UTF-8 encoding.

In addition, get the citation of R packages using the `citation()` function. 

Check out this [article](https://tilburgsciencehub.com/topics/research-skills/writing/citations/reference-list/) for a more in-depth approach. 

Here's an example of the general syntax for manually recording a reference in a .bib file:

```         
@article{key,
  author = {Author, A. and Buthor, B. and Cuthor, C.},
  year = {2024},
  title = {Title of the article},
  journal = {Journal of the article},
  volume = {1},
  number = {2},
  pages = {3-4},
  month = {5},
  url = {http://www.url.com}
}
```

Here's an example **for R and R packages**, using the `citation()` function.

```{r}
# Citation for R
citation()

# Citation for a specific package (e.g., ggplot2)
citation("ggplot2")
```

#### Step 2: Link A `BibTeX` File in the YAML Header {-}

Start with linking your .bib file in the `RMarkdown` document's YAML header. This file contains your reference list in a specific `LaTeX` format. Insert the following code into the `YAML` header, substituting references.bib with the pathway and name of your `BibTeX` file:

Start with linking your .bib file in the R Markdown document's YAML header. This file contains your reference list in a specific LaTeX format..bib is a format for storing references, it is a script with reference information for on e.g. articles and books used in your report. Insert the following code into the YAML header, substituting references.bib with the name of your BibTeX file:

```         
---
title: "Your title here"
author: "Your name here"
output: html_document
bibliography: references.bib
---
```
#### Step 3: Enable Linking Citations {-}

To link in-text citations directly to their bibliography entry, add `link-citations: yes` in your YAML header:

```         
---
title: "Your title here"
author: "Your name here"
output: html_document
bibliography: your-bib-file.bib
link-citations: yes
---
```

#### Step 4: Add In-Text Citations {-}

Inside referencing within your report can be achieved using the `@key` syntax inside the markdown part. The key matches the citation key in your .bib file.
For instance, specifying @rmarkdownCookbook, @baseR or @ggplot2 within your document dynamically links to the corresponding reference in the bibliography section.

**Syntax used**: _For instance, specifying `@rmarkdownCookbook, @baseR or @ggplot2` within your document dynamically links to the corresponding reference in the bibliography section._

### How to move the bibliography location {.unnumbered}

By default, bibliographies appear at the document's end. To relocate the bibliography, set the output format to `bookdown::html_document2` (or equivalent for other formats) in the YAML and use the `<div id="refs"></div>` tag to specify the new location. 

```         
# References 
<div id="refs"></div>
```

# Referencing: Figures, Tables & Sections

## Set-up {-}
When writing your report, you often encounter the need to refer to a table or figure within your document. The `bookdown` package supports cross-referencing elements within documents. A feature that is not available in the default `Rmarkdown` output formats. By setting the output to one of the `bookdown` formats, features such as automatic numbering and hyperlinks for figures, tables, and sections are enabled. Here's how to specify these settings in the YAML header.

```         
output:
  bookdown::pdf_document2  # For PDF documents
  bookdown::html_document2 # For HTML documents
  bookdown::word_document2 # For Word documents
```

## Referring Figures

To cite a figure within your document, use the syntax `Figure \@ref(fig:your-chunk-name)`, where _your-chunk-name_ is the label you assign to the figure's code chunk. This setup allows for dynamic linking to figures generated from code chunks. 

Here is an example which visualizes GDP per capita trends in the Netherlands:
```{r visualization-netherlands, echo = FALSE, warning= FALSE, message = FALSE, fig.cap = "From 1952 to 2007, the GDP per capita in the Netherlands saw a generally steady upward trend. There was a notable exception between 1977 and 1982 when this growth did not follow the usual linear pattern."}
library(ggplot2)
library(dplyr)
library(gapminder)
gapminder %>%
  filter(country == "Netherlands") %>%
  ggplot(aes(x = year,
             y = gdpPercap)) + 
  geom_point()
```

GDP per capita in the Netherlands is higher than in the last 50 years! (See Figure \@ref(fig:visualization-netherlands))

**Syntax used**: (See Figure `\@ref(fig:visualization-netherlands)`)

## Referring Tables
The same method can be applied for referring to tables inside your report. Use the syntax: `Table \@ref(tab:chunk-name)`. Again the _chunk-name_ is the label you assign to the table's code chunk.

We recommend creating tables from your data frames with the `knitr::kable` function. `kable` takes a data.frame as input, and outputs the table into a `markdown` table, which will be rendered into the appropriate output format.

```{r table-netherlands, echo = FALSE, warning= FALSE, message = FALSE}
gapminder %>%
  filter(country == "Netherlands") %>%
  head() %>%
  knitr::kable(caption = "Raw gapminder data for the Netherlands", digits = 2)
```

We can see above in Table \@ref(tab:table-netherlands) the raw data used to create Figure \@ref(fig:visualization-netherlands).

**syntax used:** *We can see above in `Table \@ref(tab:table-netherlands)` the raw data used to create `Figure \@ref(fig:visualization-netherlands)`.*

## Referencing a section

To mention sections within your text, use the syntax: `Section \@ref(section-name)`. The `section-name` name refers to a header in your document containing a unique identifier (`{#section-name}`). This approach helps readers navigate to another section within your report with a single mouse click. 

For example, the section `# Citations` is labeled with the unique identifier {#citing-sections} and is now clickable with the syntax `Section \@ref(citing-sections)`: Section \@ref(citing-sections).

Used syntax inside the header: `# Citations {#citing-sections}`.

**Note**: 
The unique identifier is called a `slug` and is designed so it can not start with a number. Otherwise, it will print out the `slug`:
- This would not work: `## Section 4 {#section-4}`.
- Write instead: `## Section 4 {#section-four}`.

# Citations

